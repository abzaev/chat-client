(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{132:function(e,t,a){e.exports=a(195)},141:function(e,t,a){},142:function(e,t,a){},174:function(e,t){},195:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),o=a(41),i=(a(141),a(142),a(24)),u=a(244),s=a(242),m=a(243),E=a(248),f=a(245),p=a(246),d=a(234),b=a(196),g=a(240),v=a(236),j=a(237),O=a(232),h=a(238),w=a(239),S=a(120),k=a.n(S),y=a(119),x=a.n(y),C=a(250),_=a(231),F=a(230),T=function(e){var t=e.title,a=e.content,n=e.close,c=e.open;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{fullWidth:!0,open:c,onClose:n},t&&r.a.createElement(F.a,null,t),a&&r.a.createElement(_.a,null,a)))},M=a(35),N=a(247),I=a(235),A=function(e){var t=e.onClick,a=e.initialValues,c=e.closeForm,l=Object(n.useState)(a.messageText),o=Object(i.a)(l,2),u=o[0],s=o[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=Object(M.a)(Object(M.a)({},a),{},{messageText:u});t(n),c()}},r.a.createElement(O.a,{container:!0,spacing:1},r.a.createElement(O.a,{item:!0},r.a.createElement(N.a,{variant:"outlined",value:u,onChange:function(e){return s(e.target.value)}})),r.a.createElement(O.a,{container:!0,direction:"row",spacing:1,item:!0},r.a.createElement(O.a,{item:!0},r.a.createElement(I.a,{type:"submit"},"Send")),r.a.createElement(O.a,{item:!0},r.a.createElement(I.a,{onClick:c},"Cancel")))))},D=function(e){var t=e.msg,a=e.deleteMessage,c=e.changeMessage,l=Object(n.useState)(!1),o=Object(i.a)(l,2),u=o[0],s=o[1];return r.a.createElement(v.a,null,r.a.createElement(j.a,{primary:r.a.createElement(O.a,{container:!0,item:!0,justify:"space-between"},r.a.createElement(O.a,{item:!0},t.userName),r.a.createElement(O.a,{item:!0},r.a.createElement(h.a,{size:"small",onClick:function(){return s(!0)}},r.a.createElement(x.a,null)),r.a.createElement(h.a,{onClick:function(){return a(t._id)},size:"small"},r.a.createElement(k.a,null)))),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,t.messageText),t.file_link&&r.a.createElement("div",null,r.a.createElement(w.a,{component:"button",onClick:function(){return window.location=t.file_link}},"Download file: ",t.name)))}),r.a.createElement(T,{open:u,close:function(){return s(!1)},title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",content:r.a.createElement(A,{closeForm:function(){return s(!1)},initialValues:t,onClick:function(e){return c(e)}})}))},H=function(e){return{type:"FETCH_MESSAGES",payload:e}},z=function(e){return{type:"FETCH_MESSAGE",payload:e}},B=a(126),G=a(28),W=a.n(G),L=a(57),V=a(121),J=a.n(V),U=a(58),X=a.n(U),P=J()("/"),R=function(e){P.emit("join",e)},$=function(e){var t=Object(o.b)(),a=e.messageList,n=e.roomId;return r.a.createElement(r.a.Fragment,null,a.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{deleteMessage:function(e){return t(function(e,t){return Object(L.a)(W.a.mark((function a(){return W.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==t){a.next=5;break}return a.next=3,X.a.delete("/messagework/".concat(e));case 3:a.next=7;break;case 5:return a.next=7,X.a.delete("/messageflud/".concat(e));case 7:R(t);case 8:case"end":return a.stop()}}),a)})))}(e,n))},changeMessage:function(e){return t(function(e,t){return Object(L.a)(W.a.mark((function a(){var n,r;return W.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e._id,r=Object(B.a)(e,["_id"]),0!==t){a.next=6;break}return a.next=4,X.a.put("/messagework/".concat(n),r);case 4:a.next=8;break;case 6:return a.next=8,X.a.put("/messageflud/".concat(n),r);case 8:R(t);case 9:case"end":return a.stop()}}),a)})))}(e,n))},msg:e}),r.a.createElement(g.a,{component:"li"}))})))},q=a(233),K=a(252),Q=a(122),Y=a.n(Q),Z=a(124),ee=(a(194),a(241)),te=Object(ee.a)({emoji:{position:"fixed",zIndex:1101,bottom:0,right:0},appBar:{top:"auto",bottom:0,borderTop:"1px solid blue"}}),ae=function(){var e=te(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)("Anonymous"),u=Object(i.a)(o,2),E=u[0],f=u[1],p=Object(n.useState)(),d=Object(i.a)(p,2),b=d[0],g=d[1],v=Object(n.useState)(!1),j=Object(i.a)(v,2),w=j[0],S=j[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.emoji},w&&r.a.createElement(Z.a,{emoji:"point_up",onSelect:function(e){return l(c+e.native)}})),r.a.createElement(s.a,{position:"fixed",color:"inherit",className:e.appBar},r.a.createElement(m.a,null,r.a.createElement(q.a,{fullWidth:!0,variant:"outlined"},r.a.createElement(K.a,{placeholder:"Enter your message",value:c,onChange:function(e){return l(e.target.value)}})),r.a.createElement(O.a,{container:!0,direction:"row",spacing:1,alignItems:"center"},r.a.createElement(O.a,{item:!0},r.a.createElement(h.a,{size:"small",onClick:function(e){e.preventDefault(),S(!w)}},r.a.createElement(Y.a,null))),r.a.createElement(O.a,{item:!0},r.a.createElement("input",{id:"contained-button-file",multiple:!0,type:"file",onChange:function(e){return g(e.target.files[0])},style:{display:"none"}}),r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(I.a,{variant:"contained",color:"primary",component:"span"},"Upload"))),r.a.createElement(O.a,{item:!0},r.a.createElement(I.a,{onClick:function(){var e;(e={messageText:c,userName:E,file:b}).file&&(e.fileType=e.file.type,e.fileName=e.file.name),P.emit("chat message",e),l(""),g(void 0)},variant:"contained"},"Send")),r.a.createElement(O.a,{item:!0},r.a.createElement(N.a,{label:"Name",variant:"outlined",value:E,onChange:function(e){return f(e.target.value)}}))))))},ne=function(e){var t=Object(o.b)(),a=Object(o.c)((function(e){return e.messages.messages})),c=e.roomId;return Object(n.useEffect)((function(){R(c)}),[c]),Object(n.useEffect)((function(){t(function(){var e=Object(L.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P.on("allMessages",(function(e){return t(H(e))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t(function(){var e=Object(L.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P.on("chat message",(function(e){return t(z(e))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(b.a,null,r.a.createElement($,{roomId:c,messageList:a}))),r.a.createElement(m.a,null),r.a.createElement(ae,null))};function re(e){var t=e.children,a=Object(u.a)({disableHysteresis:!0,threshold:0});return r.a.cloneElement(t,{elevation:a?4:0})}var ce=function(){var e=r.a.useState(0),t=Object(i.a)(e,2),a=t[0],n=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(re,null,r.a.createElement(s.a,null,r.a.createElement(m.a,null,r.a.createElement(E.a,{value:a,onChange:function(e,t){return n(t)}},r.a.createElement(f.a,{label:"\u0420\u0430\u0431\u043e\u0447\u0438\u0439 \u0447\u0430\u0442"}),r.a.createElement(f.a,{label:"\u0424\u043b\u0443\u0434\u0438\u043b\u043a\u0430"}))))),r.a.createElement(m.a,null),r.a.createElement(p.a,null,r.a.createElement(ne,{roomId:a})))};var le=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ce,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=a(123),ie=a(30),ue=a(125),se={messages:[]},me=Object(ie.c)({messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MESSAGES":return Object(M.a)(Object(M.a)({},e),{},{messages:t.payload});case"FETCH_MESSAGE":return Object(M.a)(Object(M.a)({},e),{},{messages:[].concat(Object(ue.a)(e.messages),[t.payload])});default:return e}}}),Ee=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ie.d)(Object(ie.a)(oe.a))(ie.e)(me);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:Ee},r.a.createElement(le,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[132,1,2]]]);
//# sourceMappingURL=main.adf93b23.chunk.js.map